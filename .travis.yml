# WARNING: DO NOT EDIT!
#
# This file was generated by plugin_template, and is managed by bootstrap.py. Please use
# bootstrap.py to update this file.
#
# For more info visit https://github.com/pulp/plugin_template
---
sudo: required
# https://docs.travis-ci.com/user/trusty-ci-environment/
dist: bionic
language: python
python:
  # Fedora has 3.6 available (python36.x86_64), but pulp container images
  # with it are not being built or published yet.
  # - "3.6"
  - "3.7"
env:
  matrix:
    - TEST=pulp
services:
  - postgresql
  - redis-server
  - docker
addons:
  apt:
    packages:
      - httpie
      - jq
  # postgres versions provided by el7 RHSCL (lowest supportable version)
  postgresql: '9.6'
jobs:
  include:
  # - stage: test and deploy
  #   before_install: .travis/before_install.sh
  #   install: .travis/install.sh
  #   before_script: .travis/before_script.sh
  #   script: .travis/script.sh
  #   after_failure:
  #     - http --timeout 30 --check-status --pretty format --print hb http://localhost:24817/pulp/api/v3/status/
  #     - sudo docker images
  #     - sudo kubectl logs -l name=pulp-operator -c ansible --tail=10000
  #     - sudo kubectl logs -l name=pulp-operator -c operator --tail=10000
  #     - sudo kubectl logs -l app=pulp-api --tail=50000
  #     - sudo kubectl logs -l app=pulp-content --tail=10000
  #     - sudo kubectl logs -l app=pulp-resource-manager --tail=10000
  #     - sudo kubectl logs -l app=pulp-worker --tail=10000
  - stage: deploy to pypi
    install:
      - pip install --no-cache-dir --editable /app
    deploy:
      provider: pypi
      distributions: "bdist_wheel"
      user: "__token__"
      server: https://test.pypi.org/legacy/
      skip_cleanup: true
      password:
        secure: "EfqXyT1gM5l2umEmGpqbFpPyoVPUAGmlODG8ogttGWbEqeV82F5fdaSZMCrLuhlLLSvBY9Mltk8/zaO5hwnSenr2ribNghUql6AJXmxCQ2SM28HxJqsF/XIrE07DW8PbDYDZbPJ/hMWULzsHX8nTO5D/eqs4TdzjQVwbUCCp76LqchmKZn41IOmePrSAIcMSJxbMq0l+KCwQFRhbuS+YpDwuhygmw8fNvAElVy+6iBfBaMArxDQvS8CYWvtPhYgi8yKOc7uRA302Z9QXrt1PLI9D58F/KzRyUi0ExdIWnAJOoxtpVt7xZJt4CF6k/i5YEsQoUVofCMa1PKUxWeQC3CV2rmri91341foMOcXEivEMjxmPwYXMvmo3NyCqiOFYLbv4t/gvCfEZLPCOwpO+HXpE4srFnc/1gVQOMxIHJ/ClB25aOOBNeYUL86jPWShOz0yMUJs+1i6MggwNdSMJDj+oNhJW2HaKDVckWFE6yDURlszk9aO+dPA3Mk42/mEJMqkKVF1U8jBhKmrImCiHkomsWRLr98lSjSwFYlAvCKd4v8pfKVH1x1K4ptBCy2JRsZjQkCq1qw2sk2PnroELY5cc8UrPz5pe7xUjPSuWMmGOLW7fP/vmv0u4NMtNmLJa3yqduxPB4dJ4DLwfqjxdW4XnoGafUeCRcmowgBIoUDM="
      # on:
      #   tags: true
...
